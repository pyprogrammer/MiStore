<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="author" content="Nathan Zhang">
<title>主页</title>
<link href="css/mainpage.css" rel="stylesheet" type="text/css">
</head>

<body>
<div class="top">
  <div id="imageContainer">
    <div class="cutoff" id="cutoff">
      <div id="topBorder"></div>
    </div>
    <div id="bottomBorder"></div>
    <div id="imageWrapper"> <img id="userimage" src="images/mainpage/userimage.jpg" height="130" width="130" /> </div>
    <h2 id="topCaption" class="sectionCaption">Freedom</h2>
  </div>
</div>
<div class="sectionCaptionContainer">
  <hr/>
  <h2 class="sectionCaption">我的收藏</h2>
  <img src="images/mainpage/staricon.png" height="15" width="15" class="icon" alt="#"/> </div>
<div class="storage">
<ul class="appList">
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
</ul>
<button id="loadStorage"> <span>查看更多</span> </button>
</div>
<div class="sectionCaptionContainer">
  <hr />
  <h2 class="sectionCaption"> 和精品应用不期而遇 </h2>
  <img src="images/mainpage/arrow.png" class="icon" height="15" width="15" alt="->" /> </div>
<div class="suggested">
  <ul class="appList">
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
    <li class="app"><a href=""><img src="images/mainpage/userimage.jpg" class="appImage" height="55" width="55" alt="无画面"/> <span class="caption">应用名</span></a> </li>
  </ul>
</div>
</div>
<div class="bottom">
  <button type="button" id="loadMore"> <img src="images/mainpage/refresh.png" height="30" width="30" /> <br/>
  换一批 </button>
</div>
<script>
function resize()
{
	var applists = document.getElementsByClassName('appList');
	var APP_WIDTH = 60; //width of icon/caption
	var MIN_BORDER_WIDTH = 73/2; //minimum spacing between app items
	var MAX_BORDER_WIDTH = 2*MIN_BORDER_WIDTH + APP_WIDTH;
	styleElement = document.getElementById('customStyles');
	if (!styleElement)
	{
		styleElement = document.createElement('style');
		styleElement.id = 'customStyles';
		styleElement.type="text/css";
		document.head.appendChild(styleElement);
	}
	var list;
	var borderWidth;
	var parentWidth;
	var numElements;
	var children;
	var style;
	var className;
	var classList;
	resize._class_index = resize._class_index || 0;
	for(var i=0, m=applists.length; i < m; i++)
	{
		list = applists[i];
		if (list.classList.contains('resize'))
		{
			classList = list.classList;
			for (var ind=0, l=classList.length;ind<l;ind++)
			{
				className = classList[ind];
				if (className.indexOf("appList-") !== -1)
				{
					break;
				}
			}
		}
		else
		{
			list.classList.add('resize');
			className = "appList-"+resize._class_index;
			list.classList.add(className);
			resize._class_index++;
		}
		parentWidth = parseFloat(window.getComputedStyle(list).width);
		numElements = Math.floor((parentWidth + MIN_BORDER_WIDTH)/(APP_WIDTH + MIN_BORDER_WIDTH));
		do {
		  borderWidth = ((parentWidth - numElements * APP_WIDTH) / (2*(numElements-1)));
		  numElements++;
		}
		while (borderWidth > MAX_BORDER_WIDTH)
		numElements--;
		borderWidth += 'px';
		styleElement.sheet.insertRule("."+className+" > li {margin-left:"+borderWidth+";\n" + "margin-right:"+borderWidth+";}\n",0);
		styleElement.sheet.insertRule("."+className+" > li:nth-child("+numElements+"n+1) {margin-left:0;}",0);
		styleElement.sheet.insertRule("."+className+" > li:nth-child("+numElements+"n) {margin-right:0;}",0);
		styleElement.sheet.insertRule("."+className+" > li:nth-child(n+"+(2*numElements+1)+"){display:none;}",0);
	}
}
window.addEventListener('load',resize);
window.addEventListener('resize',resize);
window.addEventListener('orientationChange',resize);


var button = document.getElementById('loadMore');
button.addEventListener('click',function(){
	this.children[0].classList.toggle('rotate');
});
</script>
</body>
</html>
